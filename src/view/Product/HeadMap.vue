<template>
  <div class="head-con container">
    <div id="heatmap"></div>
  </div>
</template>

<script>
export default {
  methods: {
    headmapchart() {
      var chartDom = document.getElementById("heatmap");
      var myChart = this.$echarts.init(chartDom);
      var hours = [
        "碳生产率",
        "碳排放量",
        "地区生产总值",
        "第一产业占GDP的比重",
        "第二产业占GDP的比重",
        "第三产业占GDP的比重",
        "户籍人口",
        "建成区绿化覆盖率",
        "工业二氧化硫排放量",
        "工业烟（粉）尘排放量",
        "工业固体废物综合利用率",
        "污水处理厂集中处理率",
        "生活无害化垃圾处理率",
        "科学技术支出",
        "规模以上工业企业数",
        "万人拥有公汽数",
        "单位GDP能耗",
      ];
      var days = [
        "单位GDP能耗",
        "万人拥有公汽数",
        "规模以上工业企业数",
        "科学技术支出",
        "生活无害化垃圾处理率",
        "污水处理厂集中处理率",
        "工业固体废物综合利用率",
        "工业烟（粉）尘排放量",
        "工业二氧化硫排放量",
        "建成区绿化覆盖率",
        "户籍人口",
        "第三产业占GDP的比重",
        "第二产业占GDP的比重",
        "第一产业占GDP的比重",
        "地区生产总值",
        "碳排放量",
        "碳生产率",
      ];
      var data1 = [
        [0, 16, 1],
        [0, 15, -0.27],
        [0, 14, -0.021],
        [0, 13, 0.28],
        [0, 12, -0.06],
        [0, 11, -0.17],
        [0, 10, 0.11],
        [0, 9, 0.065],
        [0, 8, -0.1],
        [0, 7, -0.017],
        [0, 6, 0.037],
        [0, 5, -0.015],
        [0, 4, -0.04],
        [0, 3, -0.049],
        [0, 2, 0.058],
        [0, 1, -0.1],
        [0, 0, -0.36],
        [1, 16, -0.27],
        [1, 15, 1],
        [1, 14, 0.82],
        [1, 13, -0.46],
        [1, 12, -0.064],
        [1, 11, 0.45],
        [1, 10, 0.39],
        [1, 9, 0.18],
        [1, 8, 0.3],
        [1, 7, 0.044],
        [1, 6, 0.053],
        [1, 5, 0.22],
        [1, 4, 0.17],
        [1, 3, 0.71],
        [1, 2, 0.6],
        [1, 1, 0.33],
        [1, 0, 0.21],
        [2, 16, -0.021],
        [2, 15, 0.82],
        [2, 14, 1],
        [2, 13, -0.4],
        [2, 12, -0.059],
        [2, 11, 0.4],
        [2, 10, 0.49],
        [2, 9, 0.14],
        [2, 8, 0.23],
        [2, 7, 0.04],
        [2, 6, 0.15],
        [2, 5, 0.25],
        [2, 4, 0.2],
        [2, 3, 0.82],
        [2, 2, 0.68],
        [2, 1, 0.35],
        [2, 0, -0.089],
        [3, 16, 0.28],
        [3, 15, -0.46],
        [3, 14, -0.4],
        [3, 13, 1],
        [3, 12, -0.49],
        [3, 11, -0.29],
        [3, 10, 0.009],
        [3, 9, -0.23],
        [3, 8, -0.23],
        [3, 7, -0.057],
        [3, 6, -0.0091],
        [3, 5, -0.35],
        [3, 4, -0.28],
        [3, 3, -0.25],
        [3, 2, -0.4],
        [3, 1, -0.25],
        [3, 0, -0.26],
        [4, 16, -0.06],
        [4, 15, -0.064],
        [4, 14, -0.059],
        [4, 13, -0.49],
        [4, 12, 1],
        [4, 11, -0.69],
        [4, 10, -0.14],
        [4, 9, 0.078],
        [4, 8, 0.25],
        [4, 7, 0.055],
        [4, 6, -0.039],
        [4, 5, 0.078],
        [4, 4, 0.065],
        [4, 3, -0.13],
        [4, 2, 0.072],
        [4, 1, 0.036],
        [4, 0, 0.012],
        [5, 16, -0.17],
        [5, 15, 0.45],
        [5, 14, 0.4],
        [5, 13, -0.29],
        [5, 12, -0.69],
        [5, 11, 1],
        [5, 10, 0.15],
        [5, 9, 0.1],
        [5, 8, -0.081],
        [5, 7, -0.014],
        [5, 6, 0.05],
        [5, 5, 0.21],
        [5, 4, 0.16],
        [5, 3, 0.35],
        [5, 2, 0.25],
        [5, 1, 0.17],
        [5, 0, 0.2],
        [6, 16, 0.11],
        [6, 15, 0.39],
        [6, 14, 0.49],
        [6, 13, 0.009],
        [6, 12, -0.14],
        [6, 11, 0.15],
        [6, 10, 1],
        [6, 9, 0.02],
        [6, 8, 0.39],
        [6, 7, 0.045],
        [6, 6, 0.19],
        [6, 5, 0.082],
        [6, 4, 0.031],
        [6, 3, 0.26],
        [6, 2, 0.44],
        [6, 1, 0.033],
        [6, 0, -0.13],
        [7, 16, -0.065],
        [7, 15, 0.18],
        [7, 14, 0.14],
        [7, 13, -0.23],
        [7, 12, 0.078],
        [7, 11, 0.1],
        [7, 10, 0.02],
        [7, 9, 1],
        [7, 8, 0.023],
        [7, 7, 0.0071],
        [7, 6, 0.09],
        [7, 5, 0.17],
        [7, 4, 0.1],
        [7, 3, 0.082],
        [7, 2, 0.17],
        [7, 1, 0.09],
        [7, 0, 0.021],
        [8, 16, -0.1],
        [8, 15, 0.3],
        [8, 14, 0.23],
        [8, 13, -0.23],
        [8, 12, 0.25],
        [8, 11, -0.081],
        [8, 10, 0.39],
        [8, 9, 0.023],
        [8, 8, 1],
        [8, 7, 0.15],
        [8, 6, -0.12],
        [8, 5, -0.027],
        [8, 4, -0.047],
        [8, 3, 0.029],
        [8, 2, 0.3],
        [8, 1, 0.1],
        [8, 0, 0.021],
        [9, 16, -0.017],
        [9, 15, 0.044],
        [9, 14, 0.04],
        [9, 13, -0.057],
        [9, 12, 0.055],
        [9, 11, -0.014],
        [9, 10, 0.045],
        [9, 9, 0.0071],
        [9, 8, 0.15],
        [9, 7, 1],
        [9, 6, -0.041],
        [9, 5, 0.039],
        [9, 4, -0.029],
        [9, 3, -0.002],
        [9, 2, 0.0062],
        [9, 1, 0.00012],
        [9, 0, -0.011],
        [10, 16, 0.037],
        [10, 15, 0.053],
        [10, 14, 0.15],
        [10, 13, -0.0091],
        [10, 12, -0.039],
        [10, 11, 0.05],
        [10, 10, 0.19],
        [10, 9, 0.09],
        [10, 8, -0.12],
        [10, 7, -0.041],
        [10, 6, 1],
        [10, 5, 0.042],
        [10, 4, 0.08],
        [10, 3, 0.061],
        [10, 2, 0.26],
        [10, 1, 0.042],
        [10, 0, -0.17],
        [11, 16, -0.015],
        [11, 15, 0.22],
        [11, 14, 0.25],
        [11, 13, -0.35],
        [11, 12, 0.078],
        [11, 11, 0.21],
        [11, 10, 0.082],
        [11, 9, 0.17],
        [11, 8, -0.027],
        [11, 7, 0.039],
        [11, 6, 0.042],
        [11, 5, 1],
        [11, 4, 0.47],
        [11, 3, 0.14],
        [11, 2, 0.15],
        [11, 1, 0.036],
        [11, 0, 0.05],
        [12, 16, -0.04],
        [12, 15, 0.17],
        [12, 14, 0.2],
        [12, 13, -0.28],
        [12, 12, 0.065],
        [12, 11, 0.16],
        [12, 10, 0.031],
        [12, 9, 0.1],
        [12, 8, -0.047],
        [12, 7, -0.029],
        [12, 6, 0.08],
        [12, 5, 0.47],
        [12, 4, 1],
        [12, 3, 0.12],
        [12, 2, 0.18],
        [12, 1, 0.051],
        [12, 0, 0.05],
        [13, 16, -0.049],
        [13, 15, 0.71],
        [13, 14, 0.82],
        [13, 13, -0.25],
        [13, 12, -0.13],
        [13, 11, 0.35],
        [13, 10, 0.26],
        [13, 9, 0.082],
        [13, 8, 0.029],
        [13, 7, -0.002],
        [13, 6, 0.061],
        [13, 5, 0.14],
        [13, 4, 0.12],
        [13, 3, 1],
        [13, 2, 0.44],
        [13, 1, 0.37],
        [13, 0, -0.0028],
        [14, 16, -0.058],
        [14, 15, 0.6],
        [14, 14, 0.68],
        [14, 13, -0.4],
        [14, 12, 0.072],
        [14, 11, 0.25],
        [14, 10, 0.44],
        [14, 9, 0.17],
        [14, 8, 0.3],
        [14, 7, 0.0062],
        [14, 6, 0.26],
        [14, 5, 0.15],
        [14, 4, 0.18],
        [14, 3, 0.44],
        [14, 2, 1],
        [14, 1, 0.23],
        [14, 0, -0.071],
        [15, 16, -0.1],
        [15, 15, 0.33],
        [15, 14, 0.35],
        [15, 13, -0.25],
        [15, 12, 0.036],
        [15, 11, 0.17],
        [15, 10, 0.033],
        [15, 9, 0.09],
        [15, 8, 0.1],
        [15, 7, 0.00012],
        [15, 6, 0.042],
        [15, 5, 0.036],
        [15, 4, 0.051],
        [15, 3, 0.37],
        [15, 2, 0.23],
        [15, 1, 1],
        [15, 0, 0.013],
        [16, 16, -0.36],
        [16, 15, 0.21],
        [16, 14, -0.089],
        [16, 13, -0.26],
        [16, 12, 0.012],
        [16, 11, 0.2],
        [16, 10, -0.13],
        [16, 9, 0.021],
        [16, 8, 0.021],
        [16, 7, -0.011],
        [16, 6, -0.17],
        [16, 5, 0.05],
        [16, 4, 0.05],
        [16, 3, -0.0028],
        [16, 2, -0.071],
        [16, 1, 0.013],
        [16, 0, 1],
      ];

      data1 = data1.map(function (item) {
        return [item[1], item[0], item[2] || "-"];
      });

      let option = {
        title: {
          text: "相关性热力图",
          left: "40%",
          top: "3%",
          textStyle: {
            color: "#EEDD78",
            fontSize: 20,
          },
        },
        dataZoom: [
          {
            id: "dataZoomY",
            type: "slider",
            yAxisIndex: [0],
            startValue: 0,
            endValue: 10,
            filterMode: "empty",
            textStyle: {
              color: "#fff",
            },
          },
        ],
        tooltip: {
          position: "top",
          formatter: function (params) {
            return (
              "学历：" +
              days[params.value[1]] +
              "<br/>" +
              "人数：" +
              params.data[2]
            );
          },
        },
        animation: false,
        grid: {
          left: "3%",
          right: "8%",
          bottom: "8%",
          containLabel: true,
        },
        xAxis: {
          type: "category",
          data: hours,
          axisLine: {
            lineStyle: {
              color: "#fff",
            },
          },
          axisLabel: {
            interval: 0,
            rotate: 40,
            color: "rgba(255, 255, 255, 0.4)",
            fontSize: "10",
          },
          splitArea: {
            show: true,
          },
          name: "",
        },
        yAxis: {
          type: "category",
          data: days,
          axisLine: {
            lineStyle: {
              color: "#fff",
            },
          },
          axisLabel: {
            interval: 0,
            rotate: 0,
            fontSize: "10",
            color: "rgba(255, 255, 255, 0.4)",
          },
          splitArea: {
            show: true,
          },
          name: "",
        },
        visualMap: {
          min: -0.7,
          max: 1,
          calculable: true,
          orient: "horizontal",
          left: "center",
          bottom: "1%",
          text: ["1", "-0.7"], // 文本，默认为数值文本
          textStyle: {
            color: "#fff",
          },
          calculable: false,
          //热力图的颜色
          color: [
            "rgba(84,112,198,0.9)",
            "rgba(250,200,88,0.7)",
            "rgba(145,204,117,0.8)",
            "rgba(238,102,102,0.5)",
          ],
        },
        series: [
          {
            name: "Punch Card",
            type: "heatmap",
            data: data1,
            label: {
              normal: {
                show: false,
              },
            },
            itemStyle: {
              emphasis: {
                shadowBlur: 10,
                shadowColor: "rgba(120, 0, 0, 0.3)",
              },
            },
          },
        ],
      };
      myChart.setOption(option);
    },
  },
  mounted() {
    this.headmapchart();
  },
};
</script>

<style lang="less" scoped>
// .head-con {
//   transform: translateY(-10px);
// }
#heatmap {
  height: 500px;
  width: 520px;
}
</style>
